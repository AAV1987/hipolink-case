<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Достижения</title>

<link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;700&display=swap" rel="stylesheet">

<style>
    body{
        margin:0;
        padding:30px 10px;
        font-family:'Comfortaa', sans-serif;
        background:#2b2630;
        color:#fff;
    }

    .wrapper{
        max-width:700px;
        margin:0 auto;
    }

    button.main-toggle{
        background:#a61d45;
        padding:16px;
        text-align:center;
        border-radius:12px;
        cursor:pointer;
        font-size:20px;
        font-weight:700;
        user-select:none;
        border:none;
        width:100%;
        color:white;
        line-height:1.3;
    }

    /* ✔ height вместо max-height */
    .main-body{
        overflow:hidden;
        height:0;
        transition:height .35s ease;
        margin-top:12px;
    }

    .case{
        background:rgba(255,255,255,0.05);
        border:1px solid rgba(255,255,255,0.22);
        border-radius:12px;
        padding:14px;
        margin-bottom:12px;
        cursor:pointer;
        position:relative;
    }

    .case-title{
        font-size:17px;
        font-weight:700;
        padding-right:20px;
    }

    .arrow{
        position:absolute;
        right:14px;
        top:50%;
        transform:translateY(-50%);
        transition:.3s;
    }

    /* ✔ height вместо max-height */
    .case-content{
        overflow:hidden;
        height:0;
        transition:height .35s ease;
        margin-top:10px;
        font-size:15px;
        line-height:1.55;
    }

    .case.active .arrow{
        transform:translateY(-50%) rotate(180deg);
    }
</style>

</head>
<body>

<div class="wrapper">

    <button class="main-toggle" onclick="toggleMain()">Достижения ▾</button>

    <div id="mainBody" class="main-body">

        <!-- 8 кейсов, укороченные тексты для примера -->

        <div class="case" onclick="toggleCase(this)">
            <div class="case-title">Кейс 1. Антикризисный разворот крупного регионального оператора связи</div>
            <div class="arrow">▾</div>
            <div class="case-content">
                <p>Крупный оператор фиксированной и мобильной связи подошёл к моменту кризиса...</p>
                <p>На основе собранных данных я перестроил управленческую модель...</p>
                <p>Работа с персоналом заняла важное место...</p>
            </div>
        </div>

        <div class="case" onclick="toggleCase(this)">
            <div class="case-title">Кейс 2. Полная легализация и перезапуск сети АЗС</div>
            <div class="arrow">▾</div>
            <div class="case-content">
                <p>Сеть из тринадцати автозаправочных станций...</p>
                <p>Я организовал регистрацию юридических лиц...</p>
                <p>Я переработал операционные процессы...</p>
            </div>
        </div>

        <div class="case" onclick="toggleCase(this)">
            <div class="case-title">Кейс 3. Сопровождение инвестпроекта 100 млн ₽</div>
            <div class="arrow">▾</div>
            <div class="case-content">
                <p>Инвестор планировал вложить около ста миллионов рублей...</p>
                <p>Разработал проект планировки территории...</p>
                <p>Прогнозируемая выручка превысила шесть миллионов...</p>
            </div>
        </div>

        <div class="case" onclick="toggleCase(this)">
            <div class="case-title">Кейс 4. Исключение неактивного участника</div>
            <div class="arrow">▾</div>
            <div class="case-content">
                <p>Компания столкнулась с ситуацией блокировки решений...</p>
                <p>Суд обязал участника продать долю...</p>
                <p>Оборот вырос более чем на 40%...</p>
            </div>
        </div>

        <div class="case" onclick="toggleCase(this)">
            <div class="case-title">Кейс 5. Восстановление корпоративных прав</div>
            <div class="arrow">▾</div>
            <div class="case-content">
                <p>Обнаружены поддельные протоколы...</p>
                <p>Экспертизы подтвердили подделку...</p>
                <p>Права полностью восстановлены...</p>
            </div>
        </div>

        <div class="case" onclick="toggleCase(this)">
            <div class="case-title">Кейс 6. Восстановление наследственных прав</div>
            <div class="arrow">▾</div>
            <div class="case-content">
                <p>Наследственная цепочка была нарушена дважды...</p>
                <p>Суд восстановил все звенья цепочки...</p>
                <p>Клиент получил чистый объект без споров...</p>
            </div>
        </div>

        <div class="case" onclick="toggleCase(this)">
            <div class="case-title">Кейс 7. Остановка незаконного сноса дома</div>
            <div class="arrow">▾</div>
            <div class="case-content">
                <p>После пожара администрация подписала постановление...</p>
                <p>Заключение эксперта признано недействительным...</p>
                <p>Квартиры сохранены...</p>
            </div>
        </div>

        <div class="case" onclick="toggleCase(this)">
            <div class="case-title">Кейс 8. Защита четырёх жилых домов</div>
            <div class="arrow">▾</div>
            <div class="case-content">
                <p>Инспекция требовала признания домов многоквартирными...</p>
                <p>Экспертизы доказали соответствие ИЖС...</p>
                <p>Суд отклонил требования о сносе...</p>
            </div>
        </div>

    </div>
</div>

<script>
// Главное меню Достижений — height, без max-height
function toggleMain(){
    let body = document.getElementById("mainBody");

    if(body.dataset.open === "1"){
        body.style.height = "0px";
        body.dataset.open = "0";
    } else {
        body.style.height = body.scrollHeight + "px";
        body.dataset.open = "1";
    }

    sendSize();
}

// Вложенные кейсы
function toggleCase(el){
    el.classList.toggle("active");

    let panel = el.querySelector(".case-content");

    if(panel.dataset.open === "1"){
        panel.style.height = "0px";
        panel.dataset.open = "0";
    } else {
        panel.style.height = panel.scrollHeight + "px";
        panel.dataset.open = "1";
    }

    // Пересчёт высоты родителя
    let mainBody = document.getElementById("mainBody");
    mainBody.style.height = mainBody.scrollHeight + "px";

    sendSize();
}

// Отправка высоты в Hipolink
function sendSize(){
    const h = document.body.scrollHeight;
    window.parent.postMessage({type:'resize', height:h}, '*');
}

// Слежение за ростом страницы
window.addEventListener('load', sendSize);
new ResizeObserver(sendSize).observe(document.body);
</script>

</body>
</html>
